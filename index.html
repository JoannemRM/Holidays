<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Festivos UK 2025</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-blue-50 text-gray-800 font-sans">

  <div class="max-w-4xl mx-auto p-6">
    <h1 class="text-3xl font-bold mb-4 text-center"> D铆as Festivos en UK - 2025</h1>
    <p class="text-center text-sm mb-6 text-gray-600">Recibir谩s notificaciones 5 y 2 d铆as antes de un festivo.</p>
    <ul id="festivos" class="space-y-4"></ul>
  </div>

  <script>
    const festivos = [
      { pais: "Inglaterra y Gales", nombre: "Good Friday", fecha: "2025-04-18", tipo: "Nacional", bandera: "" },
      { pais: "Inglaterra y Gales", nombre: "Easter Monday", fecha: "2025-04-21", tipo: "Nacional", bandera: "" },
      { pais: "Inglaterra y Gales", nombre: "Early May bank holiday", fecha: "2025-05-05", tipo: "Nacional", bandera: "" },
      { pais: "Inglaterra y Gales", nombre: "Spring bank holiday", fecha: "2025-05-26", tipo: "Nacional", bandera: "" },
      { pais: "Inglaterra y Gales", nombre: "Summer bank holiday", fecha: "2025-08-25", tipo: "Nacional", bandera: "" },
      { pais: "Inglaterra y Gales", nombre: "Christmas Day", fecha: "2025-12-25", tipo: "Nacional", bandera: "" },
      { pais: "Inglaterra y Gales", nombre: "Boxing Day", fecha: "2025-12-26", tipo: "Nacional", bandera: "" },
      { pais: "Escocia", nombre: "Good Friday", fecha: "2025-04-18", tipo: "Nacional", bandera: "" },
      { pais: "Escocia", nombre: "Early May bank holiday", fecha: "2025-05-05", tipo: "Nacional", bandera: "" },
      { pais: "Escocia", nombre: "Spring bank holiday", fecha: "2025-05-26", tipo: "Nacional", bandera: "" },
      { pais: "Escocia", nombre: "Summer bank holiday", fecha: "2025-08-04", tipo: "Nacional", bandera: "" },
      { pais: "Escocia", nombre: "St Andrews Day (substitute)", fecha: "2025-12-01", tipo: "Nacional", bandera: "" },
      { pais: "Escocia", nombre: "Christmas Day", fecha: "2025-12-25", tipo: "Nacional", bandera: "" },
      { pais: "Escocia", nombre: "Boxing Day", fecha: "2025-12-26", tipo: "Nacional", bandera: "" },
      { pais: "Irlanda del Norte", nombre: "Good Friday", fecha: "2025-04-18", tipo: "Nacional", bandera: "" },
      { pais: "Irlanda del Norte", nombre: "Easter Monday", fecha: "2025-04-21", tipo: "Nacional", bandera: "" },
      { pais: "Irlanda del Norte", nombre: "Early May bank holiday", fecha: "2025-05-05", tipo: "Nacional", bandera: "" },
      { pais: "Irlanda del Norte", nombre: "Spring bank holiday", fecha: "2025-05-26", tipo: "Nacional", bandera: "" },
      { pais: "Irlanda del Norte", nombre: "Battle of the Boyne", fecha: "2025-07-14", tipo: "Nacional", bandera: "" },
      { pais: "Irlanda del Norte", nombre: "Summer bank holiday", fecha: "2025-08-25", tipo: "Nacional", bandera: "" },
      { pais: "Irlanda del Norte", nombre: "Christmas Day", fecha: "2025-12-25", tipo: "Nacional", bandera: "" },
      { pais: "Irlanda del Norte", nombre: "Boxing Day", fecha: "2025-12-26", tipo: "Nacional", bandera: "" }
    ];

    const lista = document.getElementById("festivos");

    // Mostrar los festivos
    festivos.forEach(f => {
      const item = document.createElement("li");
      item.className = "bg-white p-4 rounded shadow hover:shadow-lg transition";
      item.innerHTML = `
        <div class="text-xl font-semibold">${f.nombre}</div>
        <div class="text-sm text-gray-600">${f.pais} 路 ${f.fecha} 路 ${f.tipo}</div>
      `;
      lista.appendChild(item);
    });

    // Pedir permiso para notificaciones
    if ("Notification" in window) {
      if (Notification.permission !== "granted") {
        Notification.requestPermission();
      }
    }

    // Enviar notificaci贸n 5 d铆as antes o 2 d铆as antes, y ajustarla si cae en fin de semana
    function revisarNotificaciones() {
      const hoy = new Date();
      festivos.forEach(f => {
        const fecha = new Date(f.fecha);
        const diferencia5 = Math.ceil((fecha - hoy) / (1000 * 60 * 60 * 24)) - 5;
        const diferencia2 = Math.ceil((fecha - hoy) / (1000 * 60 * 60 * 24)) - 2;

        // Revisar si la fecha cae en fin de semana
        const esFinDeSemana = (d) => d === 6 || d === 0;

        // Enviar notificaci贸n 5 d铆as antes
        if (diferencia5 === 0) {
          let fechaNotificacion = new Date(fecha);
          if (esFinDeSemana(fechaNotificacion.getDay())) {
            fechaNotificacion.setDate(fechaNotificacion.getDate() - (fechaNotificacion.getDay() === 0 ? 2 : 1)); // Asegurar que sea el viernes anterior
          }
          new Notification(` Se acerca un festivo ${f.bandera}`, {
            body: `${f.nombre} en ${f.pais} es el ${f.fecha}`,
          });
        }

        // Enviar notificaci贸n 2 d铆as antes
        if (diferencia2 === 0) {
          let fechaNotificacion = new Date(fecha);
          if (esFinDeSemana(fechaNotificacion.getDay())) {
            fechaNotificacion.setDate(fechaNotificacion.getDate() - (fechaNotificacion.getDay() === 0 ? 2 : 1)); // Asegurar que sea el viernes anterior
          }
          new Notification(` Se acerca un festivo ${f.bandera}`, {
            body: `${f.nombre} en ${f.pais} es el ${f.fecha}`,
          });
        }
      });
    }

    revisarNotificaciones();
    setInterval(revisarNotificaciones, 60 * 1000); // Revisar cada minuto
  </script>
</body>
</html>
